/*! elfer_dev_lib 2014-11-17 */
!function(a){var b={logdom:'<nav class="t_nav"><ul class="t_tab"><li class="t_type active" data-type="all">All</li><li class="t_type" data-type="errors">Errors</li><li class="t_type" data-type="logs">Logs</li></ul><div class="t_ctrl"><div class="t_btn" data-func="resize">R</div><div class="t_btn" data-func="locate">P</div></div><div class="t_btn close">X</div></nav><div class="t_box all"></div></div><div class="t_holder"></div>',logcss:""},c=function(){this.__islog=!1,this.cursize=0,this.sizes=["small","normal","huge"];var a=this,c=function(){var c=document.createElement("div");c.id="t_log",c.className="hide",c.innerHTML=b.logdom;var d=document.createTextNode(b.logcss),e=document.createElement("style");e.appendChild(d),document.head.appendChild(e),document.body.insertAdjacentElement("beforeend",c),a.tab=c.querySelector(".t_tab"),a.ctrl=c.querySelector(".t_ctrl"),a.box=c.querySelector(".t_box"),a.lamp=c.querySelector(".t_holder"),a.el=c},d={resize:function(){var b=a.cursize,c=a.sizes,d=c[b],e=(b+1)%3,f=c[e];a.cursize=e,a.el.classList.remove(d),a.el.classList.add(f)},locate:function(){a.el.classList.toggle("up")}},e=function(b){var c=b.target,d=oquery="",e=c.dataset.type;e&&!/active/.test(c.className)&&("all"==e?d=".t_item[data-type]":(d='.t_item[data-type="'+e+'"]',oquery='.t_item:not([data-type="'+e+'"])'),showitems=a.box.querySelectorAll(d),!!oquery&&(hideItems=a.box.querySelectorAll(oquery)),c.classList.add("active"),!!this.cur&&this.cur.classList.remove("active"),this.cur=c,a.box.className="t_box "+e,j(showitems),i(hideItems))},f=function(a){var b=a.target,c=b.dataset.func;!!c&&d[c]()},g=function(){this.classList.remove("lamp"),a.show.call(a)},h=function(){a.tab.cur=a.tab.querySelector(".t_type[data-type=all]"),a.tab.addEventListener("click",e,!1),a.ctrl.addEventListener("click",f,!1),a.lamp.addEventListener("click",g,!1),a.el.querySelector(".close").addEventListener("click",function(){a.close.call(a)},!1),a.box.addEventListener("click",function(a){var b=a.target,c=b.className;"t_icon"==c&&b.parentNode.classList.toggle("unfold")},!1)},i=function(a){for(var b=0,c=a.length;c>b;b++)a[b].style.display="none"},j=function(a){for(var b=0,c=a.length;c>b;b++)a[b].style.display="block"};c(),h(),window.onerror=function(){a.lamp.classList.add("error"),a._log.call(a,"error")},window.log=a._log.bind(a),log("w y want? I really wanna to know that!"),json={name:"hahah",key:"chchc",sexy:["boy","girl"],wtf:{f1:"yoyo",f2:"wowo"}},log(json)};c.prototype={_temp:{item:'<div class="t_item {%valtype%}" data-type="{%itemtype%}"><i class="t_icon"></i><div class="t_msg">{%item%}</div></div>',key_val:'<span class="tvo_p {%nodetype%}"><em class="t_key">{%key%}</em><em class="t_val">{%val%}</em></span>',Obj:'<span class="tt_obj">Object&nbsp;{</span>{%obj%}}'},init:function(a){var a=a||{},b="";!!a.cursize&&(this.cursize=a.cursize),!!a.curUp&&(b="up"),this.el.className+=" "+this.sizes[this.cursize]+b},show:function(){return this.el.classList.remove("hide"),this},close:function(){return this.el.classList.add("hide"),this},_exceTemp:function(a,b){var c=a.match(/(\{\%([a-zA-Z0-9]+)\%\})/g);for(k in c){var d=b[c[k].slice(2,-2)]||"";a=a.replace(c[k],d)}return a},_log:function(a,b){b=b||"ms","logs"!=b&&/hide/.test(this.el.className)&&this.lamp.classList.add("lamp"),"string"==typeof a?this._msglog(a):"object"==typeof a?this._objlog(a):"error"==b?this._erlog(a):"warn"==b?this._warnlog(a):this._msglog(JSON.stringify(a)),this.box.scrollTop=this.box.scrollHeight},_msglog:function(a){var b=this._exceTemp(this._temp.item,{item:a,itemtype:"logs"});this.box.insertAdjacentHTML("beforeend",b)},_objlog:function(a){var b=this,c=function(a,c){var d="",e="";return c.constructor==String?d='"'+c+'"':c.constructor==Array?(d='<span class="tt_obj" data-val="'+btoa(JSON.stringify(c))+'">Array['+c.length+"]</span>",e="tvop_obj"):c.constructor==Boolean?d='"'+c+'"':c.constructor==Object?(d='<span class="tt_obj" data-val="'+btoa(JSON.stringify(c))+'">Object</span>',e="tvop_obj"):d=(c.constructor==Function,c.toString()),b._exceTemp(b._temp.key_val,{key:a+":",val:d,nodetype:e})},d="";for(key in a)d+=c(key,a[key]);var e=this._exceTemp(this._temp.Obj,{obj:d});this._exceData({item:e,itemtype:"logs",valtype:"t_v_obj"})},_exceData:function(a){var b=({item:a.item,itemtype:a.itemtype||"logs",valtype:a.valtype||""},this._exceTemp(this._temp.item,a));this.box.insertAdjacentHTML("beforeend",b)},_erlog:function(){var a='<h5 class="t_item" data-type="errors">'+str+"</h5>";this.box.insertAdjacentHTML("beforeend",a)},_warnlog:function(){var a='<h5 class="t_item" data-type="errors">'+str+"</h5>";this.box.insertAdjacentHTML("beforeend",a)}},a.tlog=c,window.onload=function(){(new a.tlog).init()}}(window.lib||(window.lib={}));