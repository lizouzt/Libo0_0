/*! elfer_dev_lib 2014-11-17 */
function initApp(){var a=$("bezierCurve");a.width=SIZE,a.height=SIZE,ctx=a.getContext("2d"),$box=$("J_box"),$p1=$("drag_p1"),$p2=$("drag_p2"),$clipBoard=$("clipBoard"),renderWrap(),bindEvent()}function bindEvent(){Drag({el:"drag_p1",range:{x1:0,y1:0,x2:SIZE,y2:SIZE},start:function(){this.el.classList.add("active")},move:function(){renderWrap()},end:function(){this.el.classList.remove("active")}}),Drag({el:"drag_p2",range:{x1:0,y1:0,x2:SIZE,y2:SIZE},start:function(){this.el.classList.add("active")},move:function(){this.el.style.left.substring(0,this.el.style.left.length-2),this.el.style.top.substring(0,this.el.style.top.length-2);renderWrap()},end:function(){this.el.classList.remove("active")}}),$("run").onclick=function(a){a.preventDefault();var b=a.target,c=$("view");/active/.test(b.className)||(b.className+=" active",c.className="active",setTimeout(function(){c.className="",b.className="btn_go"},2e3))}}function setTransitionFn(a){var b=["-webkit-","-moz-","-ms-","-o-",""],c="";a="transition: left 1s "+a+";";for(var d in b)c+=b[d]+a;$box.setAttribute("style",c)}function adjustValue(a){return a=a.toFixed(2),a=a.toString().replace("0.",".").replace("1.00","1").replace(".00","0")}function renderWrap(){var a={x:$p1.offsetLeft,y:$p1.offsetTop},b={x:$p2.offsetLeft,y:$p2.offsetTop};render(a,b)}function render(a,b){ctx.clearRect(0,0,SIZE,SIZE),ctx.beginPath(),ctx.lineWidth=3,ctx.strokeStyle="#000",ctx.moveTo(0,SIZE),ctx.bezierCurveTo(a.x,a.y,b.x,b.y,SIZE,0),ctx.stroke(),ctx.closePath(),ctx.beginPath(),ctx.strokeStyle="#ccc",ctx.lineWidth=1,ctx.moveTo(0,SIZE),ctx.lineTo(a.x,a.y),ctx.stroke(),ctx.moveTo(SIZE,0),ctx.lineTo(b.x,b.y),ctx.stroke(),ctx.closePath();var c=[adjustValue(a.x/SIZE),adjustValue(1-a.y/SIZE),adjustValue(b.x/SIZE),adjustValue(1-b.y/SIZE)],d="cubic-bezier("+c.join(",")+")";$clipBoard.innerText=d,setTransitionFn(d)}$=function(a){return document.getElementById(a)};var docW=document.documentElement.clientWidth,SIZE=docW>320?300:docW-20,style=document.createElement("style");style.type="text/css",style.innerText=".p0 { left: 0; top: <%SIZE%>px; }.p1 {left: 50px; top: <%SIZE%>px; }.p2 { left: <%SIZE%>px; top: 150px; }.p3 { left: <%SIZE%>px; top: 0; }".replace(/<%SIZE%>/gi,SIZE),document.head.appendChild(style);var $p1,$p2,$box,$clipBoard,ctx;window.onload=initApp;